<Window x:Class="SagaIngenieria.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:scott="clr-namespace:ScottPlot.WPF;assembly=ScottPlot.WPF"
        mc:Ignorable="d"
        Title="SAGA Ingeniería v2.0" Height="768" Width="1366"
        Background="#121212" WindowState="Normal" WindowStyle="None" ResizeMode="CanResize">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="50" ResizeBorderThickness="5" GlassFrameThickness="0" CornerRadius="0"/>
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <!-- Estilos (Mismos de siempre) -->
        <Style x:Key="MenuButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#DDDDDD"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="5,0"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#33FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="WindowControlBtn" TargetType="Button">
            <Setter Property="Width" Value="45"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#AAA"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#333"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="GraphToggleStyle" TargetType="RadioButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="bdr" 
                                Background="#FF3FA0A0" 
                                BorderBrush="#444" 
                                BorderThickness="1" 
                                Margin="2" 
                                CornerRadius="3" 
                                Padding="10,6">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center" 
                                              RecognizesAccessKey="True"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="#007ACC"/>
                                <Setter TargetName="bdr" Property="BorderBrush" Value="#009EFF"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bdr" Property="Background" Value="#3E3E42"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="ProgressBar">
            <Setter Property="Height" Value="6"/>
            <Setter Property="Background" Value="#333"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 1. BARRA SUPERIOR -->
        <Border Grid.Row="0" Background="#1F1F1F" BorderBrush="#333" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="15,0">
                </StackPanel>

                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="15,0">
                    <Image Source="/Imagenes/Logo_GSO.png" Height="30" Width="49" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                    <TextBlock Text="SAGA" Foreground="White" FontWeight="Black" FontSize="20"/>
                    <TextBlock Text="INGENIERÍA" Foreground="#00E5FF" FontWeight="Light" FontSize="20" Margin="5,0,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0">
                    <Button x:Name="btnNuevo" Click="btnNuevo_Click" Style="{StaticResource MenuButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📄" Margin="0,0,8,0"/>
                            <TextBlock Text="NUEVO"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="btnConfig" Click="btnConfig_Click" Style="{StaticResource MenuButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⚙" Margin="0,0,8,0"/>
                            <TextBlock Text="MÉTODO"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="btnCargar" Click="btnCargar_Click" Style="{StaticResource MenuButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📂" Margin="0,0,8,0"/>
                            <TextBlock Text="HISTORIAL"/>
                        </StackPanel>
                    </Button>
                    <Rectangle Width="1" Height="20" Fill="#444" Margin="10,0"/>
                    <Button x:Name="btnCalibrarCero" Click="btnCalibrarCero_Click" Style="{StaticResource MenuButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⚖" Margin="0,0,8,0"/>
                            <TextBlock Text="CALIBRAR"/>
                        </StackPanel>
                    </Button>
                    <!-- Botón IMPRIMIR (Nuevo) -->
                    <Rectangle Width="1" Height="20" Fill="#444" Margin="10,0"/>
                    <Button x:Name="btnImprimir" Click="btnImprimir_Click" Style="{StaticResource MenuButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🖨" Margin="0,0,8,0"/>
                            <!-- Icono impresora -->
                            <TextBlock Text="REPORTE PDF"/>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Right">
                    <Button Click="btnMinimizar_Click" Content="—" Style="{StaticResource WindowControlBtn}"/>
                    <Button Click="btnMaximizar_Click" Content="▢" Style="{StaticResource WindowControlBtn}"/>
                    <Button Click="btnSalir_Click" Content="✕" Style="{StaticResource WindowControlBtn}" Foreground="#FF5252"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 2. ÁREA PRINCIPAL -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="240"/>
            </Grid.ColumnDefinitions>

            <!-- PANEL IZQUIERDO -->
            <Border Grid.Column="0" Background="#252526" BorderBrush="#333" BorderThickness="0,0,1,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="15">
                        <TextBlock Text="CONFIGURACIÓN E/S" Foreground="#888" FontWeight="Bold" Margin="0,0,0,10"/>

                        <CheckBox x:Name="chkModoReal" Content="USAR MÁQUINA REAL" 
                                  Checked="chkModoReal_Checked" Unchecked="chkModoReal_Checked"
                                  Foreground="White" FontWeight="SemiBold" Margin="0,0,0,10">
                            <CheckBox.LayoutTransform>
                                <ScaleTransform ScaleX="1.1" ScaleY="1.1"/>
                            </CheckBox.LayoutTransform>
                        </CheckBox>

                        <StackPanel x:Name="PanelPuertos" Visibility="Collapsed" Margin="0,0,0,15">
                            <TextBlock Text="PUERTO COM:" Foreground="Gray" FontSize="10" Margin="0,0,0,2"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <ComboBox x:Name="cmbPuertos" Margin="0,0,5,0"
                                          HorizontalContentAlignment="Center"
                                          VerticalContentAlignment="Center"
                                          Background="#333" Foreground="Black" BorderThickness="0" 
                                          Padding="5,0" VerticalAlignment="Center" Height="30"/>
                                <Button x:Name="btnRefrescar" Content="↻" Width="30" Height="30" 
                                        Click="btnRefrescar_Click"
                                        Background="#444" Foreground="White" BorderThickness="0" HorizontalAlignment="Left" Margin="219,0,0,0"/>
                            </Grid>

                            <Button x:Name="btnConectar" Content="CONECTAR MÁQUINA" Click="btnConectar_Click"
                                    Height="35" Margin="0,10,0,0" Background="#007ACC" Foreground="White" FontWeight="Bold" BorderThickness="0"/>
                        </StackPanel>

                        <Rectangle Height="1" Fill="#444" Margin="0,5,0,15"/>
                        <TextBlock Text="CONTROL DE MÁQUINA" Foreground="#888" FontWeight="Bold" Margin="0,0,0,15"/>

                        <Button x:Name="btnMotor" Click="btnMotor_Click" Height="60" Background="#333" Margin="0,0,0,10" BorderThickness="0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="⚡" FontSize="24" Foreground="Yellow" Margin="0,0,10,0" Width="30" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center"/>
                                <TextBlock x:Name="txtBtnMotor" Text="ENCENDER" Foreground="White" FontWeight="Bold" FontSize="16" Width="107" TextAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <Rectangle Height="1" Fill="#444" Margin="0,10,0,10"/>

                        <Button x:Name="btnGrabar" Click="btnGrabar_Click" IsEnabled="False" Height="50" Margin="0,0,0,10" Background="#333"  BorderThickness="0">
                            <Border Background="#2D2D30" CornerRadius="5" BorderBrush="#D32F2F" BorderThickness="1" Width="160" Height="45">
                                <StackPanel Orientation="Horizontal" Margin="-1,-1,-1,-1">
                                    <TextBlock Text="🔴" FontSize="16" Margin="0,0,10,0" TextAlignment="Center" VerticalAlignment="Center" Width="31"/>
                                    <TextBlock Text="GRABAR REC" Foreground="#FF5252" FontWeight="Bold" TextAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.838,0.586" Width="101"/>
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button x:Name="btnGuardar" Click="btnGuardar_Click" IsEnabled="False" Height="50" Background="#333" BorderThickness="0">
                            <Border Background="#2D2D30" CornerRadius="5" BorderBrush="#2196F3" BorderThickness="1" Width="160" Height="45">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Height="37" Width="157">
                                    <TextBlock Text="⏹" FontSize="16" Margin="0,0,10,0" TextAlignment="Center" VerticalAlignment="Center" Width="31"/>
                                    <TextBlock Text="DETENER Y EDITAR" Foreground="#448AFF" FontWeight="Bold" TextAlignment="Center" Height="18" Width="114"/>
                                </StackPanel>
                            </Border>
                        </Button>

                        <Border x:Name="PanelGuardado" Visibility="Collapsed" Background="#1E1E1E" BorderBrush="#448AFF" BorderThickness="1" CornerRadius="5" Margin="0,15,0,0" Padding="10">
                            <StackPanel>
                                <TextBlock Text="DATOS DEL ENSAYO" Foreground="#448AFF" FontWeight="Bold" Margin="0,0,0,10" HorizontalAlignment="Center"/>
                                <TextBlock Text="Cliente:" Foreground="Gray" FontSize="11" Margin="0,0,0,2"/>
                                <TextBox x:Name="txtInputCliente" Text="Juan Perez"/>
                                <TextBlock Text="Vehículo:" Foreground="Gray" FontSize="11" Margin="0,5,0,2"/>
                                <TextBox x:Name="txtInputVehiculo" Text="Fiat 600 Competición"/>
                                <TextBlock Text="Notas:" Foreground="Gray" FontSize="11" Margin="0,5,0,2"/>
                                <TextBox x:Name="txtInputNotas" Height="60" TextWrapping="Wrap" AcceptsReturn="True" Text="Prueba de rutina..."/>
                                <Grid Margin="0,15,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Button Click="btnCancelarGuardado_Click" Background="#444" Height="35" Margin="0,0,5,0" Content="DESCARTAR" Foreground="White" BorderThickness="0"/>
                                    <Button Click="btnConfirmarGuardado_Click" Grid.Column="1" Background="#00E676" Height="35" Margin="5,0,0,0" Content="CONFIRMAR" FontWeight="Bold" BorderThickness="0"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <TextBlock x:Name="txtEstado" Text="Listo para Ensayar." Foreground="Gray" Margin="0,20,0,20" TextWrapping="Wrap" HorizontalAlignment="Center" TextAlignment="Center" Width="194"/>

                        <Border Background="#1E1E1E" CornerRadius="5" Padding="10" Margin="0,10,0,0" BorderBrush="#333" BorderThickness="1">
                            <StackPanel>
                                <TextBlock Text="ESTADO DE SESIÓN" Foreground="Gray" FontSize="10" FontWeight="Bold" Margin="0,0,0,10"/>

                                <Grid Margin="0,0,0,10">
                                    <TextBlock Text="DURACIÓN:" Foreground="#888"/>
                                    <TextBlock x:Name="txtCrono" Text="00:00:00" Foreground="White" HorizontalAlignment="Right" FontFamily="Consolas" FontWeight="Bold"/>
                                </Grid>

                                <Grid Margin="0,0,0,10">
                                    <TextBlock Text="CICLOS:" Foreground="#888"/>
                                    <TextBlock x:Name="txtCiclos" Text="0" Foreground="#00E5FF" HorizontalAlignment="Right" FontWeight="Bold"/>
                                </Grid>

                                <TextBlock Text="TEMP. ACEITE" Foreground="#888" FontSize="10" Margin="0,5,0,2"/>
                                <Grid>
                                    <ProgressBar Value="45" Maximum="100" Height="10" Foreground="#FF9800" Background="#333"/>
                                    <TextBlock x:Name="txtTemp" Text="45°C" Foreground="White" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,-1,0,0">
                                        <TextBlock.Effect>
                                            <DropShadowEffect ShadowDepth="0" Color="Black" BlurRadius="2"/>
                                        </TextBlock.Effect>
                                    </TextBlock>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- ZONA CENTRAL -->
            <Grid Grid.Column="1" Background="Black">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Border Background="#1E1E1E" Padding="5">
                    <Border Background="#1E1E1E" Padding="5">
                        <WrapPanel HorizontalAlignment="Center">

                            <RadioButton GroupName="Graficos" Style="{StaticResource GraphToggleStyle}" 
                                     Checked="CambiarGrafico_Checked" Tag="FvsD" IsChecked="True" ToolTip="Fuerza vs Posición">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M 8,22 C 8,5 24,5 24,22 C 24,39 8,39 8,22" 
                                      Stroke="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" 
                                      StrokeThickness="2" Width="16" Height="16" Margin="0,0,8,0" Stretch="Uniform"/>
                                    <TextBlock Text="HISTÉRESIS" FontWeight="Bold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </RadioButton>

                            <RadioButton GroupName="Graficos" Style="{StaticResource GraphToggleStyle}" 
                                     Checked="CambiarGrafico_Checked" Tag="FvsV" ToolTip="Fuerza vs Velocidad">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M 5,27 L 27,5 M 16,0 L 16,32 M 0,16 L 32,16" 
                                      Stroke="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" 
                                      StrokeThickness="2" Width="16" Height="16" Margin="0,0,8,0" Stretch="Uniform"/>
                                    <TextBlock Text="Fz vs VEL" FontWeight="Bold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </RadioButton>

                            <RadioButton GroupName="Graficos" Style="{StaticResource GraphToggleStyle}" 
                                     Checked="CambiarGrafico_Checked" Tag="FPromVsV" ToolTip="Curva Promediada">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M 2,28 Q 16,16 30,4" 
                                      Stroke="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" 
                                      StrokeThickness="3" Width="16" Height="16" Margin="0,0,8,0" Stretch="Uniform"/>
                                    <TextBlock Text="PROMEDIO" FontWeight="Bold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </RadioButton>

                            <RadioButton GroupName="Graficos" Style="{StaticResource GraphToggleStyle}" 
                                     Checked="CambiarGrafico_Checked" Tag="FDvsT" ToolTip="Dominio del Tiempo">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M 0,16 Q 8,0 16,16 T 32,16" 
                                      Stroke="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" 
                                      StrokeThickness="2" Width="16" Height="16" Margin="0,0,8,0" Stretch="Uniform"/>
                                    <TextBlock Text="TIEMPO" FontWeight="Bold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </RadioButton>

                            <RadioButton GroupName="Graficos" Style="{StaticResource GraphToggleStyle}" 
                                     Checked="CambiarGrafico_Checked" Tag="FVvsT" ToolTip="Desfase Fz/Vel">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M 16,2 A 14,14 0 1 1 16,30 A 14,14 0 1 1 16,2 M 16,16 L 26,6" 
                                      Stroke="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" 
                                      StrokeThickness="2" Width="16" Height="16" Margin="0,0,8,0" Stretch="Uniform"/>
                                    <TextBlock Text="FASE" FontWeight="Bold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </RadioButton>

                            <RadioButton GroupName="Graficos" Style="{StaticResource GraphToggleStyle}" 
                                     Checked="CambiarGrafico_Checked" Tag="PicoVsV" ToolTip="Valores Máximos">
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M 2,30 L 16,2 L 30,30" 
                                      Stroke="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}" 
                                      StrokeThickness="2" Width="16" Height="16" Margin="0,0,8,0" Stretch="Uniform"/>
                                    <TextBlock Text="PICOS" FontWeight="Bold" VerticalAlignment="Center"/>
                                </StackPanel>
                            </RadioButton>

                        </WrapPanel>
                    </Border>
                </Border>

                <scott:WpfPlot x:Name="GraficoPrincipal" Grid.Row="1"/>

                <!-- ZONA DE INFORMACIÓN INFERIOR (STACKPANEL PARA APILAR REFERENCIA + INFO) -->
                <StackPanel Grid.Row="2">

                    <!-- 1. BARRA DE REFERENCIA (NUEVA) -->
                    <Border x:Name="RefBox" Visibility="Collapsed" Background="#221F00" BorderBrush="#FFD700" BorderThickness="0,1,0,0" Padding="15,8">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="REFERENCIA DE FONDO" Foreground="#FFD700" FontSize="10" FontWeight="Bold" Margin="0,0,15,0"/>
                                <TextBlock x:Name="lblRefCliente" Text="Cliente: -" Foreground="#DDD" FontSize="11" Margin="0,0,10,0"/>
                                <TextBlock Text="|" Foreground="#555" Margin="0,0,10,0"/>
                                <TextBlock x:Name="lblRefVehiculo" Text="Vehículo: -" Foreground="#DDD" FontSize="11" Margin="0,0,10,0"/>
                                <TextBlock Text="|" Foreground="#555" Margin="0,0,10,0"/>
                                <TextBlock x:Name="lblRefFecha" Text="Fecha: -" Foreground="#AAA" FontSize="11"/>
                            </StackPanel>
                            <!-- Botón para quitar referencia -->
                            <Button Grid.Column="1" Content="Quitar" Click="btnQuitarRef_Click" HorizontalAlignment="Right" Background="Transparent" Foreground="#FFD700" BorderThickness="0" FontSize="10" Cursor="Hand"/>
                        </Grid>
                    </Border>

                    <!-- 2. INFO BOX DEL ENSAYO PRINCIPAL -->
                    <Border x:Name="InfoBox" Background="#181818" BorderBrush="#333" BorderThickness="0,1,0,0" Padding="15,10" Visibility="Collapsed">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Border Background="#333" Width="40" Height="40" CornerRadius="20" Margin="0,0,15,0">
                                <TextBlock Text="📂" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Foreground="White"/>
                            </Border>
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock Text="ARCHIVO CARGADO" Foreground="#00E5FF" FontSize="10" FontWeight="Bold" />
                                <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                    <TextBlock x:Name="lblCliente" Text="Cliente: -" Foreground="White" FontWeight="Bold" Margin="0,0,15,0"/>
                                    <TextBlock Text="|" Foreground="#444" Margin="0,0,15,0"/>
                                    <TextBlock x:Name="lblVehiculo" Text="Vehículo: -" Foreground="#DDD" Margin="0,0,15,0"/>
                                    <TextBlock Text="|" Foreground="#444" Margin="0,0,15,0"/>
                                    <TextBlock x:Name="lblFecha" Text="Fecha: -" Foreground="#AAA"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Right">
                                <TextBlock Text="NOTAS DEL ENSAYO" Foreground="Gray" FontSize="10" HorizontalAlignment="Right"/>
                                <TextBlock x:Name="lblNotas" Text="Sin notas" Foreground="#CCC" FontStyle="Italic" HorizontalAlignment="Right" MaxWidth="300" TextTrimming="CharacterEllipsis"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                </StackPanel>
            </Grid>

            <!-- PANEL DERECHO -->
            <Border Grid.Column="2" Background="#1E1E1E" BorderBrush="#333" BorderThickness="1,0,0,0">
                <StackPanel Margin="15">
                    <TextBlock Text="TELEMETRÍA" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,0,0,20"/>

                    <Border Background="#252526" CornerRadius="5" Padding="10" Margin="0,0,0,10">
                        <StackPanel>
                            <TextBlock Text="FUERZA (kg)" Foreground="#888" FontSize="11"/>
                            <Grid Margin="0,5">
                                <ProgressBar x:Name="barFuerza" Value="0" Maximum="200" Foreground="#FF4081" Height="4"/>
                            </Grid>
                            <TextBlock x:Name="txtFuerza" Text="0.0" Foreground="#FF4081" FontSize="28" FontWeight="Bold" HorizontalAlignment="Right"/>
                        </StackPanel>
                    </Border>

                    <Border Background="#252526" CornerRadius="5" Padding="10" Margin="0,0,0,10">
                        <StackPanel>
                            <TextBlock Text="POSICIÓN (mm)" Foreground="#888" FontSize="11"/>
                            <Grid Margin="0,5">
                                <ProgressBar x:Name="barPosicion" Value="0" Maximum="100" Foreground="#00E5FF" Height="4"/>
                            </Grid>
                            <TextBlock x:Name="txtPosicion" Text="0.0" Foreground="#00E5FF" FontSize="28" FontWeight="Bold" HorizontalAlignment="Right"/>
                        </StackPanel>
                    </Border>

                    <Border Background="#252526" CornerRadius="5" Padding="10" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="VELOCIDAD (mm/s)" Foreground="#888" FontSize="11"/>
                            <Grid Margin="0,5">
                                <ProgressBar x:Name="barVelocidad" Value="0" Maximum="1000" Foreground="#B2FF59" Height="4"/>
                            </Grid>
                            <TextBlock x:Name="txtVelocidad" Text="0.0" Foreground="#B2FF59" FontSize="28" FontWeight="Bold" HorizontalAlignment="Right"/>
                        </StackPanel>
                    </Border>

                    <Border Background="#252526" CornerRadius="5" Padding="10" Margin="0,0,0,20" BorderBrush="#333" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="DINÁMICA" Foreground="Gray" FontSize="10" Margin="0,0,0,5"/>
                            <Grid Margin="0,0,0,5">
                                <TextBlock Text="FRECUENCIA:" Foreground="#DDD" FontSize="11"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <TextBlock x:Name="txtFreq" Text="0.0" Foreground="White" FontWeight="Bold"/>
                                    <TextBlock Text=" Hz" Foreground="Gray" FontSize="10" VerticalAlignment="Bottom"/>
                                </StackPanel>
                            </Grid>
                            <Grid>
                                <TextBlock Text="AMPLITUD:" Foreground="#DDD" FontSize="11"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                    <TextBlock x:Name="txtAmp" Text="0" Foreground="White" FontWeight="Bold"/>
                                    <TextBlock Text=" mm" Foreground="Gray" FontSize="10" VerticalAlignment="Bottom"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <TextBlock Text="VALORES PICO" Foreground="#666" FontSize="10" Margin="0,0,0,5"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="MAX COMP" Foreground="#FF5252" FontSize="10"/>
                            <TextBlock x:Name="txtMaxComp" Text="0" Foreground="White" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                            <TextBlock Text="MAX EXPA" Foreground="#448AFF" FontSize="10"/>
                            <TextBlock x:Name="txtMaxExpa" Text="0" Foreground="White" FontWeight="Bold" HorizontalAlignment="Right"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>