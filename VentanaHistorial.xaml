<Window x:Class="SagaIngenieria.VentanaHistorial"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Base de Datos de Ensayos" Height="600" Width="931"
        Background="#1E1E1E" WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Estilo para la Tabla (DataGrid) para que no se vea blanca y vieja -->
        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="#252526"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="RowBackground" Value="#252526"/>
            <Setter Property="AlternatingRowBackground" Value="#2D2D30"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
        </Style>
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Foreground" Value="#AAA"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style TargetType="DataGridCell">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="DataGridCell">
                        <Border Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#007ACC"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Título y Filtros -->
            <RowDefinition Height="*"/>
            <!-- Tabla -->
            <RowDefinition Height="Auto"/>
            <!-- Botones Pie -->
        </Grid.RowDefinitions>

        <!-- 1. CABECERA -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="HISTORIAL DE PRUEBAS" Foreground="#00E5FF" FontSize="24" FontWeight="Bold" VerticalAlignment="Center" TextAlignment="Center"/>
            <TextBlock Text="Seleccione un ensayo para cargar o comparar" Foreground="Gray" FontSize="14" TextAlignment="Center" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- 2. TABLA DE DATOS -->
        <DataGrid x:Name="GridEnsayos" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True" SelectionMode="Single">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="FECHA" Binding="{Binding Fecha, StringFormat=dd/MM/yyyy HH:mm}" Width="*"/>
                <DataGridTextColumn Header="CLIENTE" Binding="{Binding Vehiculo.Cliente.Nombre}" Width="*"/>
                <DataGridTextColumn Header="VEHÍCULO" Binding="{Binding Vehiculo.Modelo}" Width="*"/>
                <DataGridTextColumn Header="NOTAS" Binding="{Binding Notas}" Width="*"/>
                <DataGridTextColumn Header="MAX COMP (kg)" Binding="{Binding MaxCompresion, StringFormat=N1}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- 3. BOTONERA INFERIOR -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
            <Button x:Name="btnEliminar" Content="ELIMINAR" Click="btnEliminar_Click" 
                    Background="#D32F2F" Foreground="White" Width="100" Height="40" Margin="0,0,10,0" BorderThickness="0"/>

            <Button x:Name="btnAbrir" Content="CARGAR GRÁFICO" Click="btnAbrir_Click" 
                    Background="#007ACC" Foreground="White" FontWeight="Bold" Width="150" Height="40" BorderThickness="0"/>
        </StackPanel>
    </Grid>
</Window>